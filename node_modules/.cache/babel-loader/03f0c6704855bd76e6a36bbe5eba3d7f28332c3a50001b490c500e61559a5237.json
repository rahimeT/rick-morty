{"ast":null,"code":"var _jsxFileName = \"/Users/rahimeturkmen/Desktop/DevOps-Style-App/rick-morty/src/pages/MainPage.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useRef } from 'react';\nimport CustomInput from '../components/CustomInput/CustomInput';\nimport CharacterContainer from '../components/CharacterPopUp/CharacterContainer';\nimport { FetchMainData } from '../components/api/FetchData';\nimport { useSelector } from 'react-redux';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst MainPage = () => {\n  _s();\n  var _storageCharacters$ch;\n  const [search, setSearch] = useState('');\n  const [characters, setCharacters] = useState([]);\n  const [data, setData] = useState([]);\n  const [error, setError] = useState(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const storageCharacters = useSelector(state => state.character);\n  const [isPopupVisible, setPopupVisibility] = useState(false);\n  let characterPage = storageCharacters === null || storageCharacters === void 0 ? void 0 : (_storageCharacters$ch = storageCharacters.characters) === null || _storageCharacters$ch === void 0 ? void 0 : _storageCharacters$ch.length;\n  const inputRef = useRef(null);\n  const popupRef = useRef(null);\n  const handleInputFocus = () => {\n    setPopupVisibility(true);\n  };\n  useEffect(() => {\n    const handleOutsideClick = event => {\n      if (inputRef.current && !inputRef.current.contains(event.target) && popupRef.current && !popupRef.current.contains(event.target)) {\n        setPopupVisibility(false);\n      }\n    };\n    document.addEventListener('mousedown', handleOutsideClick);\n    const fetchDataAsync = async () => {\n      try {\n        setIsLoading(true);\n        const result = await FetchMainData('character', characterPage);\n        setData(result);\n      } catch (error) {\n        setError(error);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    fetchDataAsync();\n    return () => {\n      document.removeEventListener('mousedown', handleOutsideClick);\n    };\n  }, [characterPage]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(CustomInput, {\n        setSearch: setSearch,\n        query: search,\n        setCharacters: setCharacters,\n        loading: isLoading,\n        setIsLoading: setIsLoading,\n        setError: setError,\n        handleInputFocus: handleInputFocus,\n        reference: inputRef,\n        isPopupVisible: isPopupVisible\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this), isPopupVisible && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(CharacterContainer, {\n        reference: popupRef,\n        error: error,\n        mainCharacters: data,\n        search: search,\n        characters: characters\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n};\n_s(MainPage, \"AD72bDshOQG7jLYvbSmu1l8qwlY=\", false, function () {\n  return [useSelector];\n});\n_c = MainPage;\nexport default MainPage;\nvar _c;\n$RefreshReg$(_c, \"MainPage\");","map":{"version":3,"names":["React","useEffect","useState","useRef","CustomInput","CharacterContainer","FetchMainData","useSelector","jsxDEV","_jsxDEV","Fragment","_Fragment","MainPage","_s","_storageCharacters$ch","search","setSearch","characters","setCharacters","data","setData","error","setError","isLoading","setIsLoading","storageCharacters","state","character","isPopupVisible","setPopupVisibility","characterPage","length","inputRef","popupRef","handleInputFocus","handleOutsideClick","event","current","contains","target","document","addEventListener","fetchDataAsync","result","removeEventListener","children","query","loading","reference","fileName","_jsxFileName","lineNumber","columnNumber","mainCharacters","_c","$RefreshReg$"],"sources":["/Users/rahimeturkmen/Desktop/DevOps-Style-App/rick-morty/src/pages/MainPage.tsx"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\nimport CustomInput from '../components/CustomInput/CustomInput';\nimport CharacterContainer from '../components/CharacterPopUp/CharacterContainer';\nimport { FetchMainData } from '../components/api/FetchData';\nimport { useSelector } from 'react-redux';\nimport { RootState } from '../redux/store';\n\nconst MainPage = () => {\n  const [search, setSearch] = useState<string>('');\n  const [characters, setCharacters] = useState([]);\n  const [data, setData] = useState([]);\n  const [error, setError] = useState(null);\n  const [isLoading, setIsLoading] = useState<boolean>(true);\n  const storageCharacters = useSelector((state: RootState) => state.character);\n  const [isPopupVisible, setPopupVisibility] = useState<boolean>(false);\n  let characterPage = storageCharacters?.characters?.length;\n  const inputRef = useRef<HTMLInputElement | null>(null);\n  const popupRef = useRef<HTMLInputElement | null>(null);\n\n  const handleInputFocus = () => {\n    setPopupVisibility(true);\n  };\n\n  useEffect(() => {\n    const handleOutsideClick = (event: MouseEvent) => {\n      if (\n        inputRef.current &&\n        !inputRef.current.contains(event.target as Node) &&\n        popupRef.current &&\n        !popupRef.current.contains(event.target as Node)\n      ) {\n        setPopupVisibility(false);\n      }\n    };\n\n    document.addEventListener('mousedown', handleOutsideClick);\n\n    const fetchDataAsync = async () => {\n      try {\n        setIsLoading(true);\n        const result = await FetchMainData('character', characterPage);\n        setData(result);\n      } catch (error: any) {\n        setError(error);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    fetchDataAsync();\n\n    return () => {\n      document.removeEventListener('mousedown', handleOutsideClick);\n    };\n  }, [characterPage]);\n\n  return (\n    <>\n      <div>\n        <CustomInput\n          setSearch={setSearch}\n          query={search}\n          setCharacters={setCharacters}\n          loading={isLoading}\n          setIsLoading={setIsLoading}\n          setError={setError}\n          handleInputFocus={handleInputFocus}\n          reference={inputRef}\n          isPopupVisible={isPopupVisible}\n        />\n      </div>\n      <br />\n      {isPopupVisible && (\n        <div>\n          <CharacterContainer\n            reference={popupRef}\n            error={error}\n            mainCharacters={data}\n            search={search}\n            characters={characters}\n          />\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default MainPage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}